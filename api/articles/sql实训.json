{"title":"sql实训","slug":"sql实训","date":"2021-01-14T04:13:35.000Z","updated":"2021-01-16T03:23:03.274Z","comments":true,"path":"api/articles/sql实训.json","photos":[],"link":"","excerpt":"哎 做完了1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br><br><br>--新建数据库<br><br>create database software087;<br><br>--新建数据表<br><br>use software090;<br>","covers":null,"content":"<p>哎 做完了</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">--新建数据库</span><br><span class=\"line\"></span><br><span class=\"line\">create database software087;</span><br><span class=\"line\"></span><br><span class=\"line\">--新建数据表</span><br><span class=\"line\"></span><br><span class=\"line\">use software090;</span><br></pre></td></tr></table></figure>\n\n <a id=\"more\"></a>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">create table student</span><br><span class=\"line\">    (</span><br><span class=\"line\">        stuID char(10) not null primary key,</span><br><span class=\"line\">        stuName char(8),</span><br><span class=\"line\">        stuSex char(2) default&#39;男&#39;,</span><br><span class=\"line\">        Birthday date</span><br><span class=\"line\">        );</span><br><span class=\"line\"></span><br><span class=\"line\">create table course</span><br><span class=\"line\">    (</span><br><span class=\"line\">        courseID char(3) not null primary key,</span><br><span class=\"line\">        courseName varchar(20) not null</span><br><span class=\"line\">        );</span><br><span class=\"line\"></span><br><span class=\"line\">create table sc</span><br><span class=\"line\">    (</span><br><span class=\"line\">        stuID char(10) not null,</span><br><span class=\"line\">        courseID char(3) not null,</span><br><span class=\"line\">        Grade decimal(4,1),</span><br><span class=\"line\">        primary key(stuID,courseID),</span><br><span class=\"line\">        CONSTRAINT fk_sc_stuID foreign key(stuID) references student(stuID),</span><br><span class=\"line\">        CONSTRAINT fk_sc_courseID foreign key(courseID) references course(courseID)</span><br><span class=\"line\">        );</span><br><span class=\"line\"></span><br><span class=\"line\">create table teacher</span><br><span class=\"line\">    (</span><br><span class=\"line\">        teacherID char(3) not null primary key,</span><br><span class=\"line\">        teacherName char(8) not null,</span><br><span class=\"line\">        teacherSex char(2)</span><br><span class=\"line\">        );</span><br><span class=\"line\"></span><br><span class=\"line\">create table teachering</span><br><span class=\"line\">    (</span><br><span class=\"line\">        teacherID char(3) not null,</span><br><span class=\"line\">        courseID char(3) not null,</span><br><span class=\"line\">        primary key(teacherID,courseID),</span><br><span class=\"line\">        CONSTRAINT fk_teachering_teacherID foreign key(teacherID) references teacher(teacherID),</span><br><span class=\"line\">        CONSTRAINT fk_teachering_courseID foreign key(courseID) references course(courseID)</span><br><span class=\"line\">        );</span><br><span class=\"line\"></span><br><span class=\"line\">insert into student</span><br><span class=\"line\">    values( &#39;2014030701&#39;,&#39;张三&#39;,&#39;男&#39;,&#39;1987-01-12&#39;),</span><br><span class=\"line\">          ( &#39;2014020701&#39;,&#39;王宁&#39;,&#39;男&#39;,&#39;1988-03-20&#39;),</span><br><span class=\"line\">          ( &#39;2014030702&#39;,&#39;王芳&#39;,&#39;女&#39;,&#39;1987-11-15&#39;),</span><br><span class=\"line\">          ( &#39;2014020704&#39;,&#39;李立&#39;,&#39;男&#39;,&#39;1986-12-30&#39;),</span><br><span class=\"line\">          ( &#39;2014030703&#39;,&#39;田甜&#39;,&#39;女&#39;,&#39;1987-09-10&#39;);</span><br><span class=\"line\"></span><br><span class=\"line\">insert into course</span><br><span class=\"line\">    values(&#39;C01&#39;,&#39;大学英语&#39;),</span><br><span class=\"line\">          (&#39;C02&#39;,&#39;数据库原理及应用&#39;),</span><br><span class=\"line\">          (&#39;C03&#39;,&#39;操作系统&#39;);</span><br><span class=\"line\"></span><br><span class=\"line\">insert into sc</span><br><span class=\"line\">    values(&#39;2014030701&#39;,&#39;C02&#39;,&#39;98&#39;),</span><br><span class=\"line\">          (&#39;2014030701&#39;,&#39;C03&#39;,&#39;86&#39;),</span><br><span class=\"line\">          (&#39;2014030703&#39;,&#39;C01&#39;,&#39;79&#39;),</span><br><span class=\"line\">          (&#39;2014030703&#39;,&#39;C02&#39;,&#39;94&#39;),</span><br><span class=\"line\">          (&#39;2014030703&#39;,&#39;C03&#39;,&#39;55&#39;);</span><br><span class=\"line\"></span><br><span class=\"line\">insert into teacher</span><br><span class=\"line\">    values(&#39;t01&#39;,&#39;李勇&#39;,&#39;男&#39;),</span><br><span class=\"line\">          (&#39;t02&#39;,&#39;钱军&#39;,&#39;男&#39;),</span><br><span class=\"line\">          (&#39;t03&#39;,&#39;王旺&#39;,&#39;男&#39;),</span><br><span class=\"line\">          (&#39;t04&#39;,&#39;张成&#39;,&#39;男&#39;),</span><br><span class=\"line\">          (&#39;t05&#39;,&#39;李丽&#39;,&#39;女&#39;);</span><br><span class=\"line\"></span><br><span class=\"line\">insert into teachering</span><br><span class=\"line\">    values(&#39;t01&#39;,&#39;C01&#39;),</span><br><span class=\"line\">          (&#39;t02&#39;,&#39;C02&#39;),</span><br><span class=\"line\">          (&#39;t04&#39;,&#39;C03&#39;);</span><br><span class=\"line\"></span><br><span class=\"line\">1</span><br><span class=\"line\">select stuID as 学号，stuName as 姓名,Birthday as 出生日期</span><br><span class=\"line\">from student</span><br><span class=\"line\">where stuName like &#39;王%&#39; and 男的 懒得写了;</span><br><span class=\"line\"></span><br><span class=\"line\">2</span><br><span class=\"line\">select *</span><br><span class=\"line\">from sc</span><br><span class=\"line\">limit 3;</span><br><span class=\"line\"></span><br><span class=\"line\">3</span><br><span class=\"line\">SELECT  course.courseID 课程号, courseName 课程号, COUNT(*)人数, MAX(Grade) 最高分</span><br><span class=\"line\">FROM sc,course</span><br><span class=\"line\">WHERE SC.courseID &#x3D; course.courseID </span><br><span class=\"line\">GROUP BY courseName</span><br><span class=\"line\"></span><br><span class=\"line\">4</span><br><span class=\"line\">select student .stuName, student.stuID</span><br><span class=\"line\">from sc as a join student as b on a.stuID &#x3D; b.stuID</span><br><span class=\"line\">join student on student.stuID &#x3D; A.stuID</span><br><span class=\"line\"></span><br><span class=\"line\">视图</span><br><span class=\"line\"></span><br><span class=\"line\">CREATE VIEW stu_sc_teacher</span><br><span class=\"line\"></span><br><span class=\"line\">SELECT  student.stuID 学号, student.stuName 姓名 ,sc.courseID 课程号,course.courseName 课程名 ,sc.Grade 成绩 , teachering.teacherID 教师编号 , teacher.teacherName 教师名称</span><br><span class=\"line\">FROM student,sc,course,teachering,teacher</span><br><span class=\"line\">WHERE student.stuID &#x3D; sc.stuID and sc.courseID &#x3D; course.courseID and sc.courseID &#x3D; teachering.courseID and teachering.teacherID &#x3D; teacher.teacherID</span><br><span class=\"line\">ORDER BY student.stuID </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">SELECT  student.stuName,student.stuID,sc.courseID,course.courseName,sc.Grade, teachering.teacherID</span><br><span class=\"line\">FROM student,sc,course,teachering</span><br><span class=\"line\">WHERE student.stuID &#x3D; sc.stuID and </span><br><span class=\"line\">sc.courseID &#x3D; course.courseID and </span><br><span class=\"line\">sc.courseID &#x3D; teachering.courseID and</span><br><span class=\"line\">ORDER BY student.stuID </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">存储1</span><br><span class=\"line\">delimiter &#x2F;&#x2F;</span><br><span class=\"line\">CREATE PROCEDURE proc_1()</span><br><span class=\"line\">BEGIN</span><br><span class=\"line\">SELECT student.stuID 学号, student.stuName 姓名 ,student.stuSex 性别,course.courseID 课程号,course.courseName 课程名,sc.Grade 成绩</span><br><span class=\"line\">FROM student,course,sc</span><br><span class=\"line\">WHERE student.stuID &#x3D; sc.stuID and course.courseID &#x3D; sc.courseID and sc.Grade &lt; 60</span><br><span class=\"line\">ORDER BY student.stuID;</span><br><span class=\"line\">END;&#x2F;&#x2F;</span><br><span class=\"line\">delimiter;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">delimiter &#x2F;&#x2F;</span><br><span class=\"line\">CREATE PROCEDURE proc_1()</span><br><span class=\"line\">BEGIN</span><br><span class=\"line\">SELECT student.stuID , student.stuName ,student.stuSex ,course.courseID,course.courseName,sc.Grade</span><br><span class=\"line\">FROM student,course,sc</span><br><span class=\"line\">WHERE student.stuID &#x3D; sc.stuID and course.courseID &#x3D; sc.courseID and sc.Grade &lt; 60</span><br><span class=\"line\">ORDER BY student.stuID;</span><br><span class=\"line\">END;&#x2F;&#x2F;</span><br><span class=\"line\">delimiter;</span><br><span class=\"line\"></span><br><span class=\"line\">存储2</span><br><span class=\"line\">delimiter &#x2F;&#x2F;</span><br><span class=\"line\">CREATE PROCEDURE proc_2(in xh char(10))</span><br><span class=\"line\">BEGIN</span><br><span class=\"line\">SELECT  *</span><br><span class=\"line\">FROM student</span><br><span class=\"line\">WHERE stuID &#x3D; xh;</span><br><span class=\"line\">END;&#x2F;&#x2F;</span><br><span class=\"line\">delimiter;</span><br><span class=\"line\"></span><br><span class=\"line\">存储3</span><br><span class=\"line\"></span><br><span class=\"line\">delimiter &#x2F;&#x2F;</span><br><span class=\"line\">CREATE PROCEDURE proc_3(in cid_tmp char(3) , OUT sum_grade decimal(4,1))</span><br><span class=\"line\">BEGIN</span><br><span class=\"line\">SELECT  SUM(Grade) INTO sum_grade</span><br><span class=\"line\">FROM sc</span><br><span class=\"line\">WHERE courseID &#x3D; cid_tmp;</span><br><span class=\"line\">END;&#x2F;&#x2F;</span><br><span class=\"line\">delimiter;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">set @grade&#x3D;0;</span><br><span class=\"line\">call proc_3(&#39;C03&#39;,@grade);</span><br><span class=\"line\">SELECT @grade 成绩</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">delimiter &#x2F;&#x2F;</span><br><span class=\"line\">CREATE TRIGGER student_sno</span><br><span class=\"line\">AFTER UPDATE </span><br><span class=\"line\">ON student</span><br><span class=\"line\">FOR EACH ROW</span><br><span class=\"line\">BEGIN</span><br><span class=\"line\">if (</span><br><span class=\"line\">select stuID</span><br><span class=\"line\">from sc</span><br><span class=\"line\">where old.stuID !&#x3D; new.stuID</span><br><span class=\"line\">) is NULL THEN</span><br><span class=\"line\">UPDATE sc</span><br><span class=\"line\">SET stuID &#x3D; new.stuID</span><br><span class=\"line\">WHERE stuID &#x3D; old.stuID;</span><br><span class=\"line\">END;&#x2F;&#x2F;</span><br><span class=\"line\">delimiter;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n","categories":[],"tags":[]}